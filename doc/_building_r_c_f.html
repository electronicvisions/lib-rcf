
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Remote Call Framework (RCF) - Delta V Software</title>
    <!-- Bootstrap core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <!-- JL: Using timestamp here to prevent css file from being cached -->
    <link href="../css/website.css?<?php echo time(); ?>" rel="stylesheet" />
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
    <link href="doxygenBase.css" rel="stylesheet" type="text/css" />
    <link href="doxyStylesheet.css" rel="stylesheet" type="text/css"/>
<link href="doxySidebarFixes.css" rel="stylesheet" type="text/css"/>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
    <script type="text/javascript" src="doxy-boot.js"></script>
</head>
<body style="padding-top: 0px">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light navbar-fixed-top" style="top: 20px;">
        <!-- <nav class="navbar navbar-expand-lg fixed-top"> -->
        <div class="container">
            <a class="navbar-brand" href="index.html"><img src="RCF_Logo_70px.png" height="70" /> </img></a>
            <!--
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item" style="padding-top: 0px;">
                        <a class="nav-link" href="../index.html"><i class="fa fa-home"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Documentation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../download.html">Download</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../licensing.html">Licensing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../contact.html">Contact</a>
                    </li>
                </ul>
            </div>
                -->
        </div>
    </nav>
        <div class="container">
        <div class="row">
            <div class="col-lg-12">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remote Call Framework 3.1
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_building_r_c_f.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Building RCF </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#BuildExample">Build Example</a><ul><li class="level2"><a href="#BuildExampleVS">Visual Studio</a></li>
<li class="level2"><a href="#BuildExampleGcc">gcc</a></li>
</ul>
</li>
<li class="level1"><a href="#BuildStaticDynamic">Dynamic and Static Linking</a></li>
<li class="level1"><a href="#Configuration">Build Defines</a><ul><li class="level2"><a href="#BuildDefineNotes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#FeatureDefines">Feature Defines</a><ul><li class="level2"><a href="#FeatureDefineNotes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#SupportedCompilers">Supported Compilers</a></li>
<li class="level1"><a href="#SupportedPlatforms">Supported Platforms</a></li>
</ul>
</div>
<div class="textblock"><p>RCF is provided as source code, and is intended to be compiled along with the rest of the source code that comprises your application. To compile RCF, you only compile a single file - <code>RCF.cpp</code>, located in the distribution at <code>src/RCF/RCF.cpp</code>.</p>
<p>You can compile <code>RCF.cpp</code> directly into the same module as your own sources, or you can compile it into a static or dynamic library and subsequently link it into your application.</p>
<p>RCF does not have any mandatory dependencies on any other libraries. Previous versions of RCF (2.2 and older) required the <a href="http://www.boost.org">Boost</a> header files to be available, but as of RCF 3.0, this is no longer the case.</p>
<p>RCF has several optional dependencies (<a href="http://www.zlib.net">zlib</a>, <a href="http://www.openssl.org">OpenSSL</a>, <a href="http://code.google.com/p/protobuf/">Protocol Buffers</a>), which are enabled through the feature defines listed further down.</p>
<p>Let's assume now that you have downloaded RCF to a directory <code>&lt;rcf_distro&gt;</code> on your computer.</p>
<p>To build RCF, follow these steps:</p>
<ul>
<li>Define any relevant RCF build or feature defines.</li>
<li>Set <code>&lt;rcf_distro&gt;/include</code> as an include path.</li>
<li>Compile <code>&lt;rcf_distro&gt;/src/RCF/RCF.cpp</code> .</li>
<li>Link to any relevant third party libraries.</li>
</ul>
<h1><a class="anchor" id="BuildExample"></a>
Build Example</h1>
<p>The actual details of compiling and linking will vary depending on the particular compiler you are using.</p>
<ul>
<li>If you are using <a href="http://http://www.microsoft.com/visualstudio">Visual Studio</a>, you will need to set include paths, compiler defines, linker paths, and linker input in the project properties of your Visual C++ project.</li>
<li>If you are using command line tools (such as <a href="http://http://gcc.gnu.org/">gcc</a> or <a href="https://clang.llvm.org/">clang</a>, with some flavor of makefiles), you will need to set include paths, compiler defines, linker paths, and linker input on the relevant command lines.</li>
</ul>
<p>As an example, let's build the <a class="el" href="_sample_code__tcp_server_client.html#SampleTcpClientServer">minimal TCP client and server</a>, from the <a class="el" href="_sample_code.html">Sample Code</a> section. To get started, create a source file called <code>SampleTcpClientServer.cpp</code>, and copy-paste the sample code into it. Then follow the instructions below:</p>
<h2><a class="anchor" id="BuildExampleVS"></a>
Visual Studio</h2>
<ul>
<li>In the Visual Studio IDE, select <code>New Project -&gt; Visual C++ -&gt; Win32 -&gt; Win32 Console Application</code></li>
<li>In the <code>Application Settings</code> dialog, check the <code>Empty Project</code> checkbox.</li>
<li>In the <code>Project Properties</code> dialog for the new project, select <code>C/C++ -&gt; General -&gt; Additional Include Directories</code>.</li>
<li>Add the include path to RCF - <code>&lt;rcf_distro&gt;\include</code>.</li>
<li>Add the file <code>SampleTcpClientServer.cpp</code> to the project.</li>
<li>Add the file <code>&lt;rcf_distro&gt;\src\RCF\RCF.cpp</code> to the project.</li>
<li>Select <code>Build -&gt; Build Solution</code>.</li>
</ul>
<h2><a class="anchor" id="BuildExampleGcc"></a>
gcc</h2>
<ul>
<li>From the same directory as <code>SampleTcpClientServer.cpp</code>, run the following command:</li>
</ul>
<div class="fragment"><div class="line">g++ SampleTcpClientServer.cpp &lt;rcf_distro&gt;/src/RCF/RCF.cpp -I&lt;rcf_distro&gt;/include -lpthread -ldl -oSampleTcpClientServer</div></div><!-- fragment --><h1><a class="anchor" id="BuildStaticDynamic"></a>
Dynamic and Static Linking</h1>
<p>The example above compiled <code>RCF.cpp</code> directly into the same C++ module as <code>SampleTcpClientServer.cpp</code>. You can also compile <code>RCF.cpp</code> into a static or dynamic library.</p>
<ul>
<li>To build a static library, set the relevant compiler switches for creating a static library, and compile <code>RCF.cpp</code> as usual.</li>
<li>To build a dynamic library, define <code>RCF_BUILD_DLL</code> in your build, set any relevant compiler switches for creating dynamic libraries, and compile <code>RCF.cpp</code>.</li>
</ul>
<h1><a class="anchor" id="Configuration"></a>
Build Defines</h1>
<p>The following table lists RCF build defines.</p>
<table class="doxtable">
<tr>
<th>Build define </th><th>Meaning  </th></tr>
<tr>
<td><code>RCF_BUILD_DLL</code> </td><td>Build a DLL exporting RCF. </td></tr>
<tr>
<td><code>RCF_USE_CUSTOM_ALLOCATOR</code> </td><td>Build with custom memory allocator support. </td></tr>
<tr>
<td><code>RCF_USE_CLOCK_MONOTONIC</code> </td><td>Use <code>clock_gettime()</code> to implement a monotonic clock. </td></tr>
<tr>
<td><code>RCF_MAX_METHOD_COUNT=&lt;N&gt;</code> </td><td>Extends the maximum number of methods allowed in a RCF interface. </td></tr>
</table>
<h2><a class="anchor" id="BuildDefineNotes"></a>
Notes</h2>
<h3><code>RCF_BUILD_DLL</code></h3>
<p><code>RCF_BUILD_DLL</code> needs to be defined when building dynamic libraries. It marks public RCF classes and functions as DLL exports.</p>
<h3><code>RCF_USE_CUSTOM_ALLOCATOR</code></h3>
<p><code>RCF_USE_CUSTOM_ALLOCATOR</code> is used to customize memory allocation for network send and receive buffers. If you define <code>RCF_USE_CUSTOM_ALLOCATOR</code>, you will need to implement the following two functions:</p>
<div class="fragment"><div class="line">namespace RCF {</div><div class="line">    void * RCF_new(std::size_t bytes);</div><div class="line">    void RCF_delete(void * ptr);</div><div class="line">} // namespace RCF</div></div><!-- fragment --><p><code>RCF_new()</code> and <code>RCF_delete()</code> will be called by RCF whenever allocating or deallocating memory for buffers of data that are being sent or received.</p>
<h3><code>RCF_USE_CLOCK_MONOTONIC</code></h3>
<p>When <code>RCF_USE_CLOCK_MONOTONIC</code> is defined, RCF will use <code>clock_gettime()</code> with <code>CLOCK_MONOTONIC</code>, for internal clock functionality. Otherwise RCF uses <code>gettimefoday()</code> on POSIX platforms, and <code>GetTickCount()</code> on Windows platforms.</p>
<h3><code>RCF_MAX_METHOD_COUNT=&lt;N&gt;</code></h3>
<p>By default the maximum number of methods allowed in a RCF interface is 100. This limit can be changed by setting the <code>RCF_MAX_METHOD_COUNT</code> to a custom value. The maximum allowable value is 200.</p>
<h1><a class="anchor" id="FeatureDefines"></a>
Feature Defines</h1>
<p>RCF comes with a set of feature defines, allowing users to build RCF with a specific set of features.</p>
<p>The following table lists all the available feature defines.</p>
<table class="doxtable">
<tr>
<th>Feature define </th><th>RCF feature </th><th>Default value  </th></tr>
<tr>
<td><code>RCF_FEATURE_SSPI</code> </td><td>Win32 SSPI-based encryption (NTLM, Kerberos, Schannel) </td><td>1 on Windows. 0 otherwise. </td></tr>
<tr>
<td><code>RCF_FEATURE_FILETRANSFER</code> </td><td>File transfers </td><td>0 </td></tr>
<tr>
<td><code>RCF_FEATURE_SERVER</code> </td><td>Non-critical server-side functionality (server-to-client pingbacks, server objects, session timeouts) </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_PROXYENDPOINT</code> </td><td>Proxy endpoints </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_PUBSUB</code> </td><td>Publish/subscribe </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_TCP</code> </td><td>TCP transports </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_UDP</code> </td><td>UDP transports . </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_NAMEDPIPE</code> </td><td>Win32 named pipe transports </td><td>1 on Windows. 0 otherwise. </td></tr>
<tr>
<td><code>RCF_FEATURE_LOCALSOCKET</code> </td><td>Unix local socket transports </td><td>0 on Windows. 1 otherwise. </td></tr>
<tr>
<td><code>RCF_FEATURE_HTTP</code> </td><td>HTTP/HTTPS transports </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_IPV6</code> </td><td>IPv6 support </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_SF</code> </td><td>RCF internal serialization </td><td>1 </td></tr>
<tr>
<td><code>RCF_FEATURE_LEGACY</code> </td><td>Backwards compatibility with RCF 1.x and earlier </td><td>0 </td></tr>
<tr>
<td><code>RCF_FEATURE_ZLIB</code> </td><td>Zlib-based compression. </td><td>0 </td></tr>
<tr>
<td><code>RCF_FEATURE_OPENSSL</code> </td><td>OpenSSL-based SSL encryption. </td><td>0 </td></tr>
<tr>
<td><code>RCF_FEATURE_PROTOBUF</code> </td><td>Protocol Buffer support. </td><td>0 </td></tr>
</table>
<p>To use these defines, set them to 0 or 1 depending on whether the feature should be included or not.</p>
<p>For example, to build RCF without HTTP/HTTPS support, define <code>RCF_FEATURE_HTTP=0</code> in your build.</p>
<h2><a class="anchor" id="FeatureDefineNotes"></a>
Notes</h2>
<h3><code>RCF_FEATURE_FILETRANSFER</code></h3>
<p>The file transfer feature makes use of the standard C++ <code>&lt;filesystem&gt;</code> library. This library should be available on any compiler supporting the C++17 language update. Note that if you are using gcc or clang, you may need to use the <code>-std=c++17</code> compiler option to enable C++17 support.</p>
<h3><code>RCF_FEATURE_ZLIB</code></h3>
<p>If you enable this feature by defining <code>RCF_FEATURE_ZLIB=1</code>, you will need to link to Zlib. It is possible to link statically to Zlib by defining <code>RCF_ZLIB_STATIC</code>.</p>
<h3><code>RCF_FEATURE_OPENSSL</code></h3>
<p>If you enable this feature by defining <code>RCF_FEATURE_OPENSSL=1</code>, you will need to link to OpenSSL. It is possible to link statically to OpenSSL by defining <code>RCF_OPENSSL_STATIC</code>.</p>
<h3><code>RCF_FEATURE_PROTOBUF</code></h3>
<p>If you enable this feature by defining <code>RCF_FEATURE_PROTOBUF=1</code>, you will need to link to Protocol Buffers.</p>
<h1><a class="anchor" id="SupportedCompilers"></a>
Supported Compilers</h1>
<p>RCF is written in standard C++ and as such should build on any recent standards-compliant compiler. RCF 3.0 has been tested on the following compilers:</p>
<ul>
<li>Visual C++ 2015 (x86 and x64)</li>
<li>Visual C++ 2017 (x86 and x64)</li>
<li>gcc 7.0 (x64)</li>
<li>clang 4.0 (x64)</li>
</ul>
<h1><a class="anchor" id="SupportedPlatforms"></a>
Supported Platforms</h1>
<p>RCF has been tested on Windows and Linux platforms, but you should be able to use it on any of the following :</p>
<ul>
<li>Windows</li>
<li>Linux</li>
<li>OS X</li>
<li>Solaris</li>
<li>FreeBSD </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <!--  -->
    <li class="footer">Copyright (C) <a href="http://www.deltavsoft.com">Delta V Software</a> 2019</li>
    <!-- <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li> -->
  </ul>
</div>
                            </div>
        </div>
    </div>
</body>
</html>
